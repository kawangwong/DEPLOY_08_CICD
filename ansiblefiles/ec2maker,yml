- name: EC2 Playbook
  hosts: localhost
  gather_facts: false
  vars:
    region: us-east-1
    instance_ids: *place values of ids here
    access_key: *place access_key here
    secret_key: *place secret_key here
    key_name: "change to a the name of SSH key you will use"
    subnet_id: *ID of the subnet you want to place this EC2.
    SG_1: *ID of the SG group you want to assign. Default will set all incoming.
    image_id: ami-083654bd07b5da81d #set to ubuntu 20 as of 11/11/2021
    key: usedFor
    instance_type: t2.micro
    count: *optional use, add manually. This will launch multiple of the same if you need.
    keypair: "VPC-kura-useast1"
  vars_files:
    - 'defaultvariables.yaml'
    - 'network_id.yaml'
  tasks:
    - name: Creating EC2
      community.aws.ec2_instance:
        name: jenkins
        vpc_subnet_id: '{{subnetid_1}}'
        instance_type: '{{instance_type}}'
        security_group: '{{SG1_ID}}'
        network:
          assign_public_ip: true
        image_id: '{{image_id}}'
        tags:
          '{{key}}': Jenkins
        region: '{{region}}'
        key_name: '{{keypair}}'
    - name: Creating EC2
      community.aws.ec2_instance:
        name: jenkins agent
        vpc_subnet_id: '{{subnetid_1}}'
        instance_type: '{{instance_type}}'
        security_group: '{{SG2_ID}}'
        network:
          assign_public_ip: true
        image_id: '{{image_id}}'
        tags:
          '{{key}}': JenkinsAgent
        region: '{{region}}'
        key_name: '{{keypair}}'
    - name: Creating EC2
      community.aws.ec2_instance:
        name: docker
        vpc_subnet_id: '{{subnetid_1}}'
        instance_type: '{{instance_type}}'
        security_group: '{{SG3_ID}}'
        network:
          assign_public_ip: true
        image_id: '{{image_id}}'
        tags:
          '{{key}}': Docker
        region: '{{region}}'
        key_name: '{{keypair}}'
We now need a task that will grab the data and then transfer it to a file for us to utilize SSH over to install
  - name: Gather the EC2 Instance IDs
    community.aws.ec2_instance_info:
      "tag:Name": Example
    register: 
